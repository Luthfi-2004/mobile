<ion-header translucent>
  <ion-toolbar color="light">
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/menu"></ion-back-button>
    </ion-buttons>
    <ion-title class="ion-text-center">Ringkasan Pemesanan dan Pembayaran</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="cart-content">
  <div class="cart-wrapper">
    <h3>{{ cart.length }} Item</h3>

    <div *ngFor="let item of cart; let i = index" class="cart-item">
      <img [src]="item.image" alt="Menu Image" />
      <div class="item-detail">
        <h4>{{ item.nama }}</h4>
        <p>Rp{{ item.harga | number }}</p>

        <div class="qty-control">
          <ion-button size="small" fill="clear" (click)="decreaseQty(i)">-</ion-button>
          <span>{{ item.quantity }}</span>
          <ion-button size="small" fill="clear" (click)="increaseQty(i)">+</ion-button>
        </div>

        <div class="edit-delete">
          <ion-button size="small" fill="outline" color="primary" (click)="editItem(i)">
            <ion-icon name="create-outline" slot="icon-only"></ion-icon>
          </ion-button>
          <ion-button size="small" fill="outline" color="danger" (click)="deleteItem(i)">
            <ion-icon name="trash-outline" slot="icon-only"></ion-icon>
          </ion-button>
        </div>
      </div>
    </div>

    <ion-list lines="none" class="payment-summary">
      <ion-item>
        <ion-label>Subtotal Item:</ion-label>
        <ion-text>Rp{{ subtotal | number }}</ion-text>
      </ion-item>
      <ion-item>
        <ion-label>Biaya Layanan:</ion-label>
        <ion-text>Rp{{ serviceFee | number }}</ion-text>
      </ion-item>
      <ion-item>
        <ion-label><strong>Total Pembayaran:</strong></ion-label>
        <ion-text><strong>Rp{{ total | number }}</strong></ion-text>
      </ion-item>
    </ion-list>

    <div class="payment-method">
      <h4>Pilih Metode Pembayaran</h4>
      <ion-list lines="none">
        <ion-item button (click)="selectPayment('qris')" [class.selected]="paymentMethod === 'qris'">
          <ion-icon name="qr-code-outline" slot="start"></ion-icon>
          <ion-label>QRIS</ion-label>
        </ion-item>
        <ion-item button (click)="selectPayment('manual')" [class.selected]="paymentMethod === 'manual'">
          <ion-icon name="cash-outline" slot="start"></ion-icon>
          <ion-label>Transfer Bank (Manual)</ion-label>
        </ion-item>
        <ion-item button (click)="selectPayment('cod')" [class.selected]="paymentMethod === 'cod'">
          <ion-icon name="wallet-outline" slot="start"></ion-icon>
          <ion-label>Bayar di Tempat (COD)</ion-label>
        </ion-item>
      </ion-list>
    </div>

    <ion-button expand="block" class="checkout-btn" (click)="checkout()">Buat Pesanan</ion-button>
  </div>
</ion-content>
